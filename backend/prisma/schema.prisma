// backend/prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Team {
  id           String      @id @default(uuid())
  teamName     String      @unique // Used as Username
  collegeName  String      // Used as Password
  member1      String
  member2      String
  dept         String
  year         Int
  isActive     Boolean     @default(true)
  submission   Submission?
}

model Submission {
  id                String    @id @default(uuid())
  teamId            String    @unique
  team              Team      @relation(fields: [teamId], references: [id])
  content           Json      // Stores the 15-slide venture journey data
  status            String    @default("IN_PROGRESS") // IN_PROGRESS, SUBMITTED, LOCKED
  pptUrl            String?
  canRegenerate     Boolean   @default(true)  // Admin can set to false to lock
  prototypeUrl      String?   // Link to prototype (Google Drive, form, image, etc.)
  certificateName   String?   // Name for certificate
  certificateCollege String?  // College for certificate  
  certificateYear   Int?      // Year for certificate
  submittedAt       DateTime? // Final submission timestamp
  updatedAt         DateTime  @updatedAt
}

model HackathonConfig {
  id              Int      @id @default(1)
  startTime       DateTime?
  isPaused        Boolean  @default(true)
  durationMinutes Int      @default(1440) // Default 24 Hours
  pptConfig       Json?    // Slide count, titles, limits
  collegeLogo     String?
  footerText      String?
  eventTheme      Json?    // Colors, fonts
}

model ProblemStatement {
  id          String   @id @default(uuid())
  questionNo  String
  subDivisions String?
  title       String
  description String
  allottedTo  String? // Optional: Team ID if specifically allotted
  createdAt   DateTime @default(now())
}

model Administrator {
  id           String @id @default(uuid())
  email        String @unique
  passwordHash String
}